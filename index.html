<!doctype html>
<html>
	<head>
		<meta charset="utf-8">
		<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">

		<title>Blog on K8s with Flux</title>

		<link rel="stylesheet" href="dist/reset.css">
		<link rel="stylesheet" href="dist/reveal.css">
		<link rel="stylesheet" href="dist/theme/black.css">
		<link rel="stylesheet" href="plugin/highlight/monokai.css">
		<link rel="stylesheet" href="css/presentation.css">
		<script src="plugin/highlight/highlight.js"></script>
	<body>
		<div class="reveal">
			<div class="slides">

				<section data-auto-animate data-background="rgb(33, 44, 33)">

					<h2>Blog on K8s with Flux</h2>

					<p class="righty smaller"><a href="https://twitter.com/flurdy">@flurdy</a></p>

				</section>

				<section data-auto-animate data-background="rgb(33, 44, 33)">

					<h2 class="smallest">Blog on K8s with Flux</h2>

					<ul>
						<li class="smaller">
							<a href="https://flurdy.github.io/blog-k8s-flux">flurdy.github.io/blog-k8s-flux</a>
							<ul>
								<li><a href="https://github.com/flurdyblog-k8s-flux">github.com/flurdy/blog-k8s-flux</a></li>
							</ul>
							<br/>
						</li>

						<!-- <li class="smaller"><a href="https://github.com/flurdy/lemmings/">github.com/flurdy/lemmings/</a></li> -->

					</ul>

					<aside class="notes">
						<ul>
							<li>Presentation</li>
							<li>Presentation source</li>
							<li>Clone Lemmings</li>
						</ul>
					</aside>

				</section>
				<section data-auto-animate data-background="rgb(33, 44, 33)">

					<h2 class="smallest">Blog on K8s with Flux</h2>

					<ul>
						<li>
							Ivar Abrahamsen
							<ul>
								<li><a href="https://twitter.com/flurdy">@flurdy</a></li>
								<li><a href="https://flurdy.com">flurdy.com</a></li>
							</ul>
						</li>

					</ul>

					<aside class="notes">
						<ul>
							<li></li>
						</ul>
					</aside>

				</section>

				<section data-auto-animate data-background="rgb(33, 44, 33)">

					<h2 class="smallest afragment afade-out" data-fragment-index="0">Blog on K8s with Flux</h2>

					<p class="fragment" data-fragment-index="1">Host your own blog</p>
					<p class="fragment" data-fragment-index="2">on Kubernetes</p>
					<p class="fragment" data-fragment-index="3">using gitops with Flux</p>

					<aside class="notes">
						<ul>
							<li>Flux by Weaveworks</li>
						</ul>
					</aside>

				</section>

				<section data-auto-animate data-background="rgb(33, 44, 33)">

					<h2 class="smallest" data-fragment-index="0">Blog on K8s with Flux</h2>

					<h4>Contents</h4>

					<ol>
						<li>Introduction</li>
						<li>Blog</li>
						<li>CI build</li>
						<li>Kubernetes</li>
						<li>Flux Gitops</li>
					</ol>

					<aside class="notes">
						<ul>
						</ul>
					</aside>

				</section>

				<section data-auto-animate data-transition="convex" data-background="rgb(33, 44, 33)">

					<h2 class="smallest" data-fragment-index="0">Blog on K8s with Flux</h2>

					<h4>Prior Art</h4>

					<ul>
						<li class="smaller"><a href="https://flurdy.com/docs/jekyll/">flurdy.com/docs/jekyll/</a></li>
						<li class="smaller"><a href="https://flurdy.com/docs/kubernetes/kubernetes-101.html">flurdy.com/docs/kubernetes/kubernetes-101.html</a></li>
						<li class="smaller"><a href="https://flurdy.com/docs/kubernetes/kubernetes-ingress-tls-helm.html">flurdy.com/docs/kubernetes/kubernetes-ingress-tls-helm.html</a></li>
						<li class="smaller"><a href="https://github.com/flurdy/lemmings/">github.com/flurdy/lemmings/</a></li>
					</ul>

					<aside class="notes">
						<ul>
							<li>Was going to just rehash these</li>
							<li>But they were too outdated</li>
							<li>Outdated Jekyll</li>
							<li>Ruby gems</li>
							<li>Not all gitops</li>
							<li>Flux 1.x</li>
						</ul>
					</aside>

				</section>

				<section data-transition="convex" data-background="rgb(88, 33, 55)">
					<section data-auto-animate data-transition="convex">

						<h2>Blog</h2>

						<aside class="notes">
							<ul>
							</ul>
						</aside>

					</section>
					<section data-auto-animate>

						<h2>Blog</h2>

						<ul>
							<li class="fragment">
								Full control
								<ul>
									<li>
										Own your content
									</li>
									<li>Theme as you like</li>
									<li>Not hosted by 3rd party
										<ul>
											<li class="fragment">
												<strike>Medium</strike>,
												<strike>Wordpress.org</strike>,
												<strike>Ghost</strike>,
												<strike>Blogger</strike>
											</li>
										</ul>
									</li>
								</ul>
							<li class="fragment">Simple publish pipeline</li>
						</ul>

						<aside class="notes">
							<ul>
								<li>Own your content</li>
								<li>Not Blogger</li>
								<li>Not Medium</li>
								<li>No hosted Wordpress</li>
								<li>Not Ghost</li>
							</ul>
						</aside>

					</section>
					<section data-auto-animate>

						<h2 class="smallest">Blog</h2>

						<h2 class="smallest">Alternatives</h2>

						<ul class="fragment">
							<li>Hugo</li>
							<li>Gatsby</li>
							<li>Wordpress</li>
						</ul>

						<aside class="notes">
							<ul>
								<li>A reason I have not tried them enough</li>
								<li>Hugo: Go - Fast - Broken templating for me</li>
								<li>Gatsby: Node.js -Never tried properly</li>
								<li>Wordpress: PHP-Security poor</li>
							</ul>
						</aside>

					</section>

					<section data-auto-animate>

						<h2 class="smallest">Blog</h2>

						<h2 class="fragment fade-up">Jekyll</h2>

						<p class="fragment fade-up smaller">
							<a href="https://jekyllrb.com/">jekyllrb.com</a>
						</p>
						<ul class="fragment fade-up">
							<li class="">
								Static pages
							</li>
							<li class="">
								Ruby
							</li>
							<li class="">
								Easy to use templates
							</li>
							<li class="">
								Lots of themes
							</li>
							<li class="">
								Slow generation
							</li>
						</ul>


						<aside class="notes">
							<ul>
								<li class="">
									Huge market share
								</li>
								<li>Github pages</li>
								<li>Generates static HTML pages</li>
								<li>Written in Ruby</li>
								<li>A bit slow in generation</li>
								<li>Static pages are fast</li>
								<li>Lots of free and paid for themes</li>
								<li>Maybe not the latest and shiniest</li>
							</ul>
						</aside>

					</section>

					<section data-auto-animate>

						<h2 class="smallest">Jekyll</h2>

						<h4>Install</h4>

						<p class="fragment fade-in-then-out">Ruby Gem</p>
						<p class="fragment fade-up">Ruby via Docker
							<ul>
								<li class="fragment fade-left">

									<pre class=""><code data-trim data-noescape class="wider language-shell">
										docker pull jekyll/jekyll:4.2.0
									</code></pre>
								</li>
							</ul>

						</p>

						<aside class="notes">
							<ul>
								<li>Polluting local system</li>
							</ul>
						</aside>

					</section>

					<section data-auto-animate>

						<h2 class="smallest">Jekyll</h2>

						<h4 class="">Create blog</h4>
						<div class="fragment">
							<p class="smaller">Create container</p>
							<pre class=""><code data-trim data-noescape class="language-shell">
								docker run --rm --volume="$PWD:/srv/jekyll" \
								-it jekyll/jekyll:4.2.0 /bin/bash
							</code></pre>
						</div>
						<div class="fragment">
							<!-- <p>Create blog </p> -->
							<p class="smaller">(inside container)</p>
							<pre class=""><code data-trim data-noescape class="language-shell">
								jekyll new <em class="custom">myblog</em>
								exit
							</code></pre>
						</div>
						<div class="fragment">
							<p class="smaller">(outside container)</p>
							<pre class=""><code data-trim data-noescape class="language-shell">
								cd <em class="custom">myblog</em>
								git init
								git commit -am "Initial"
							</code></pre>
						</div>

						<aside class="notes">
							<ul>
								<li>$PWD works in bash not in fish</li>
								<li>Using bash inside container</li>
								<li>myblog is whatever you decide</li>
							</ul>
						</aside>

					</section>

					<section data-auto-animate>

						<h2 class="smallest">Jekyll</h2>

						<p>Start Jekyll webserver</p>
						<div class="fragment">
							<p class="smaller">exposing port 4000</>
							<pre class=""><code data-trim data-noescape class="language-shell">
								docker run --rm --volume="$PWD:/srv/jekyll" \
								-p 4000:4000 -it jekyll/jekyll:4.2.0 /bin/bash
							</code></pre>
						</div>
						<div class="fragment">
							<p class="smaller">(inside container)</p>
							<pre class=""><code data-trim data-noescape class="language-shell">
								bundle exec jekyll bundler
							</code></pre>
						</div>
						<div class="fragment">
							<p class="smaller">(outside container)</p>
							<pre class=""><code data-trim data-noescape class="language-shell">
								open http://localhost:4000
							</code></pre>
						</div>

						<aside class="notes">
							<ul>
								<li>exposing port 4000</li>
								<li>Using bash inside container</li>
							</ul>
						</aside>

					</section>

					<section data-auto-animate>

						<h2 class="">Jekyll</h2>

						<img src="img/jekyll-default.png"/>

						<aside class="notes">
							<ul>
								<li>Yay</li>
								<li>Edit _config.yml</li>
								<li>Yay</li>
							</ul>
						</aside>

					</section>

					<section data-auto-animate>

						<h2 class="smaller">Jekyll</h2>

						<h4 class="">Docker Compose</h4>

						<pre class=""><code data-trim data-noescape class="">
							version: '3'

							services:
							jekyll:
							image: jekyll/jekyll:4.2.0
							container_name: <em class="custom">myblog</em>
							environment:
							- JEKYLL_ENV=docker
							command: jekyll serve --force_polling --livereload --drafts
							ports:
							- 4000:4000
							- 35729:35729
							volumes:
							- ./:/srv/jekyll
						</code></pre>
						<pre class=""><code data-trim data-noescape class="language-bash">
							docker compose up
						</code></pre>

						<aside class="notes">
							<ul>
								<li>Need to reload if editing _config.yml or gemfile</li>
							</ul>
						</aside>

					</section>

					<section data-auto-animate>

						<h2 class="smaller">Jekyll</h2>

						<h4 class="">Themes</h4>

						<ul>
							<li class="smallest"><a href="https://jekyllthemes.org">jekyllthemes.org</a></li>
							<li class="smallest"><a href="https://jekyll-themes.com">jekyll-themes.com</a></li>
							<li class="smallest"><a href="https://jekyllthemes.io">jekyllthemes.io</a></li>
							<li class="smallest"><a href="https://github.com/jekyll/jekyll/wiki/Themes">github.com/jekyll/jekyll/wiki/Themes</a></li>
							<li class="smallest"><a href="https://github.com/planetjekyll/awesome-jekyll-themes">github.com/planetjekyll/awesome-jekyll-themes</a></li>
							<li class="smallest"><a href="https://talk.jekyllrb.com/t/jekyll-theme-showcase-share-your-jekyll-themes/">talk.jekyllrb.com/t/jekyll-theme-showcase-share-your-jekyll-themes/</a></li>
						</ul>


						<aside class="notes">
							<ul>
								<li>A lot</li>
								<li>Pick one</li>
								<li>Paid or free</li>
								<li>Some as Gems</li>
								<li>Some as Jekyll plugins</li>
								<li>Some as zip</li>
							</ul>
						</aside>

					</section>

					<section data-auto-animate>

						<h2 class="smaller">Jekyll</h2>


						<h4 class="">Draft</h4>

						<div class="">
							<p class="smaller">(outside container)</p>
							<pre class=""><code data-trim data-noescape class="language-shell">
								touch -p _drafts/my-first-post.md
							</code></pre>
						</div>
						<div class="fragment">
							<pre class=""><code data-trim data-noescape class="language-markdown editor">
								## My first blog post

								Hello everyone
							</code></pre>
						</div>
						<div class="fragment">
							<pre class=""><code data-trim data-noescape class="language-markdown">
								open http://localhost:4000/2021/05/18/my-first-post
							</code></pre>
						</div>
						<div class="fragment">
							<pre class=""><code data-trim data-noescape class="language-bash">
								git add _drafts/my-first-post.md
								git commit -am "First post"
							</code></pre>
						</div>

						<aside class="notes">
							<ul>
								<li>in your favourite editor</li>
								<li>Should see the page generation trigger in Jekyll</li>
							</ul>
						</aside>

					</section>
				</section>

				<!-- <section data-auto-animate data-background="rgb(88, 33, 55)">

					<h2 class="smaller">Jekyll</h2>

					<h4 class="">Publish</h4>

					<div class="">
						<p class="smaller"></p>
						<pre class=""><code data-trim data-noescape class="language-bash">
							git mv _drafts/my-first-post.md _posts/2021-06-18-my-first-post.md
							git commit -am "Published first post"
 						</code></pre>
					</div>

					<aside class="notes">
						<ul>
							<li>in your favourite editor</li>
							<li>Should see the page generation trigger in Jekyll</li>
						</ul>
					</aside>

				</section> -->

				<section data-transition="convex" data-background="rgb(33, 44, 55)">
					<section data-auto-animate data-transition="convex" >

						<h2>CI Build</h2>

						<aside class="notes">
							<ul>
								<li></li>
							</ul>
						</aside>

					</section>
					<section data-auto-animate>

						<h2>CI Build</h2>

						<h4>Alternative</h4>

						<ul>
							<li><a href="">Github actions</a></li>
							<!-- <li><a href="">Google Cloud build</a></li> -->
						</ul>

						<aside class="notes">
							<ul>
								<li></li>
							</ul>
						</aside>

					</section>
					<section data-auto-animate>

						<h2 class="smallest">CI Build</h2>

						<h2>CircleCI</h2>

						<ul>
							<li><a href="">Github actions</a></li>
							<!-- <li><a href="">Google Cloud build</a></li> -->
						</ul>

						<aside class="notes">
							<ul>
								<li></li>
							</ul>
						</aside>

					</section>
				</section>

				<section data-transition="convex" data-background="rgb(33, 44, 33)">

					<h2>Kubernetes</h2>
					<ul>
						<li></li>
					</ul>

					<aside class="notes">
						<ul>
							<li></li>
						</ul>
					</aside>

				</section>

				<section data-transition="convex" data-background="rgb(33, 44, 33)">

					<h2>Flux</h2>
					<ul>
						<li></li>
					</ul>

					<aside class="notes">
						<ul>
							<li></li>
						</ul>
					</aside>

				</section>

			</div>
		</div>

		<script src="dist/reveal.js"></script>
		<script src="plugin/notes/notes.js"></script>
		<!-- <script src="plugin/markdown/markdown.js"></script> -->
		<script src="plugin/highlight/highlight.js"></script>
		<script>
			Reveal.initialize({
				controlsTutorial: true,
				hash: true,
				plugins: [ RevealHighlight, RevealNotes ],
				slideNumber: true,
				showSlideNumber: "speaker",
				totalTime: 1800,
				transition: "convex"
			});
		</script>
	</body>
</html>
